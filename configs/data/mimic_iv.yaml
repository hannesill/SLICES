# MIMIC-IV Data Configuration
#
# Experiment knobs for the MIMIC-IV data pipeline. Benchmark invariants
# (seq_length, split ratios, normalization, etc.) live in slices.constants
# and are applied automatically via Python defaults.
#
# Pipeline flow:
#   1. Raw CSV files (csv_root) -> convert_csv_to_parquet.py -> Parquet files (parquet_root)
#   2. Parquet files (parquet_root) -> extract_mimic_iv.py -> Processed data (processed_dir)
#   3. Processed data (processed_dir) -> pretrain.py / finetune.py / supervised.py
#
# Override via command line:
#   uv run python scripts/preprocessing/extract_mimic_iv.py data.parquet_root=/path/to/data
#   uv run python scripts/training/pretrain.py data.processed_dir=/path/to/processed

name: mimic_iv

# =============================================================================
# DATA PATHS
# =============================================================================

# Path to raw CSV.gz files (only needed if starting from PhysioNet CSVs)
# Expected structure:
#   ${csv_root}/hosp/patients.csv.gz
#   ${csv_root}/hosp/admissions.csv.gz
#   ${csv_root}/icu/icustays.csv.gz
#   etc.
csv_root: data/raw/mimic-iv

# Path to Parquet files (input for extraction pipeline)
# - If starting with CSVs: created by convert_csv_to_parquet.py
# - If starting with Parquet: point to your existing Parquet directory
# Expected structure:
#   ${parquet_root}/hosp/patients.parquet
#   ${parquet_root}/icu/chartevents.parquet
#   etc.
parquet_root: data/parquet/mimic-iv

# Path to processed/extracted features (output of extraction, input for training)
# Contains: timeseries.parquet, static.parquet, labels.parquet, metadata.yaml
processed_dir: data/processed/mimic-iv

# =============================================================================
# EXTRACTION SETTINGS
# =============================================================================

# Feature set to extract
# - core: Essential vital signs and labs for most tasks
# - extended: All available features including rare measurements
feature_set: core

# Feature categories to extract (null = all categories)
# Use for subset extraction, e.g., ["vitals_dense"] for only dense vitals
categories: null

# Tasks to extract labels for
tasks:
  - mortality_24h
  - mortality
  - phenotyping

# =============================================================================
# TRAINING DATA LOADING
# =============================================================================

# DataLoader settings
num_workers: 4
